<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Dual Logo Minimum Size Tester</title>
    <style>
        body {
    font-family: sans-serif;
    background: #f5f5f5;
    margin: 0;
    padding: 24px;
    color: #222;
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
  }

  /* Updated: two equal-width frames that fill the container */
  .frames {
    display: flex;
    width: 100%;
    gap: 24px;
    margin-top: 24px;
  }

  .frame-block {
    flex: 1; /* ensures 50/50 split */
    display: flex;
    flex-direction: column;
  }

  .preview-area {
    flex: 1;
    background: white;
    border-radius: 8px;
    padding: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 260px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  img {
    display: block;
    width: var(--logo-width, auto);
    height: var(--logo-height, auto);
  }

  .controls {
    margin-top: 24px;
  }

  input[type="range"] {
    width: 100%;
  }

  .label {
    margin-top: 8px;
    font-size: 14px;
    opacity: 0.7;
  }

  .bg-toggle {
    margin-top: 16px;
    display: flex;
    gap: 8px;
  }

  .bg-toggle button {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    background: #ddd;
  }

  .bg-toggle button.active {
    background: #333;
    color: white;
  }

  h3 {
    margin-bottom: 8px;
    font-size: 16px;
    opacity: 0.8;
  }
  .density-toggle {
  margin-top: 16px;
  display: flex;
  gap: 8px;
}

.density-toggle button {
  flex: 1;
  padding: 8px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  background: #ddd;
}

.density-toggle button.active {
  background: #333;
  color: white;
}

</style>
</head>

<body>
    <div class="container">
        <h2>Minimum Size Test</h2>
        <div class="frames">
            <div class="frame-block">
                <h3>Full Color</h3>
                <div id="previewFull" class="preview-area">
                    <div class="logo-wrap">
                        <img id="logoFull" src="logo-full-light.svg" alt="Full Color Logo" />
                    </div>
                </div>
            </div>
            <div class="frame-block">
                <h3>Black & White</h3>
                <div id="previewBW" class="preview-area">
                    <div class="logo-wrap">
                        <img id="logoBW" src="logo-bw-light.svg" alt="Black & White Logo" />
                    </div>
                </div>
            </div>
        </div>
        <div class="density-toggle">
            <button data-blur="0.48px" data-contrast="100%" class="active">1×</button>
            <button data-blur="0px" data-contrast="100%">2×</button>
            <button data-blur="0px" data-contrast="110%">3×</button>
        </div>
        <div class="controls">
            <label id="widthLabel" class="slider-label">Adjust by width: 0px</label>
            <input id="widthSlider" type="range" min="8" max="300" step="1">
            <label id="heightLabel" class="slider-label">Adjust by height: 0px</label>
            <input id="heightSlider" type="range" min="8" max="300" step="1">
        </div>
        <div class="bg-toggle">
            <button data-bg="#ffffff" data-full="logo-full-light.svg" data-bw="logo-bw-light.svg" class="active">Light</button>
            <button data-bg="#e0e0e0" data-full="logo-full-light.svg" data-bw="logo-bw-light.svg">Mid</button>
            <button data-bg="#1a1a1a" data-full="logo-full-dark.svg" data-bw="logo-bw-dark.svg">Dark</button>
        </div>
    </div>
    </div>
<script>
  const widthSlider = document.getElementById("widthSlider");
  const heightSlider = document.getElementById("heightSlider");

  const widthLabel = document.getElementById("widthLabel");
  const heightLabel = document.getElementById("heightLabel");

  const logoFull = document.getElementById("logoFull");
  const logoBW = document.getElementById("logoBW");

  const previewFull = document.getElementById("previewFull");
  const previewBW = document.getElementById("previewBW");

  const fullWrap = document.querySelector("#previewFull .logo-wrap");
  const bwWrap = document.querySelector("#previewBW .logo-wrap");

  function measureAndSync() {
    requestAnimationFrame(() => {
      const w = Math.round(logoFull.getBoundingClientRect().width);
      const h = Math.round(logoFull.getBoundingClientRect().height);

      widthLabel.textContent = `Adjust by width: ${w}px`;
      heightLabel.textContent = `Adjust by height: ${h}px`;

      widthSlider.value = w;
      heightSlider.value = h;
    });
  }

  // WIDTH SLIDER
  widthSlider.addEventListener("input", () => {
    const w = widthSlider.value;
    document.documentElement.style.setProperty("--logo-width", w + "px");
    document.documentElement.style.setProperty("--logo-height", "auto");
    measureAndSync();
  });

  // HEIGHT SLIDER
  heightSlider.addEventListener("input", () => {
    const h = heightSlider.value;
    document.documentElement.style.setProperty("--logo-height", h + "px");
    document.documentElement.style.setProperty("--logo-width", "auto");
    measureAndSync();
  });

  // BACKGROUND SWITCHING
  document.querySelectorAll(".bg-toggle button").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".bg-toggle button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      const bg = btn.dataset.bg;
      const fullSrc = btn.dataset.full;
      const bwSrc = btn.dataset.bw;

      previewFull.style.background = bg;
      previewBW.style.background = bg;

      logoFull.src = fullSrc;
      logoBW.src = bwSrc;

      measureAndSync();
    });
  });

  // DENSITY SIMULATION
  document.querySelectorAll(".density-toggle button").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".density-toggle button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      const blur = btn.dataset.blur;
      const contrast = btn.dataset.contrast;

      const filterValue = `blur(${blur}) contrast(${contrast})`;

      fullWrap.style.filter = filterValue;
      bwWrap.style.filter = filterValue;

      measureAndSync();
    });
  });

  // INITIALIZATION
  window.addEventListener("load", () => {
    logoFull.onload = initializeScale;
    logoBW.onload = initializeScale;

    if (logoFull.complete) initializeScale();
  });

  function initializeScale() {
    const preview = previewFull.getBoundingClientRect();

    const naturalW = logoFull.naturalWidth;
    const naturalH = logoFull.naturalHeight;

    const targetW = preview.width * 0.5;
    const targetH = preview.height * 0.5;

    const scaleW = targetW / naturalW;
    const scaleH = targetH / naturalH;

    const scale = Math.min(scaleW, scaleH);

    const finalW = Math.round(naturalW * scale);
    const finalH = Math.round(naturalH * scale);

    document.documentElement.style.setProperty("--logo-width", finalW + "px");
    document.documentElement.style.setProperty("--logo-height", finalH + "px");

    widthSlider.value = finalW;
    heightSlider.value = finalH;

    widthLabel.textContent = `Adjust by width: ${finalW}px`;
    heightLabel.textContent = `Adjust by height: ${finalH}px`;

    // Apply 1× blur AFTER layout + rasterization
    requestAnimationFrame(() => {
      const oneXButton = document.querySelector('.density-toggle button[data-blur="0.48px"]');
      if (oneXButton) oneXButton.click();
    });

    measureAndSync();
  }
</script>

</body>

</html>